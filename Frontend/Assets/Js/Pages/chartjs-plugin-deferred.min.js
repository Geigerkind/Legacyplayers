/*!
 * chartjs-plugin-deferred
 * http://chartjs.org/
 * Version: 0.3.0
 *
 * Copyright 2017 Simon Brunel
 * Released under the MIT license
 * https://github.com/chartjs/chartjs-plugin-deferred/blob/master/LICENSE.md
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("chart.js")):"function"==typeof define&&define.amd?define(["chart.js"],t):t(e.Chart)}(this,function(e){"use strict";e="default"in e?e["default"]:e,function(){function t(e,t){var n=parseInt(e,10);return isNaN(n)?0:"string"==typeof e&&e.indexOf("%")!==-1?n/100*t:n}function n(e){var n=e[s],r=e.chart.canvas;if(!r||null===r.offsetParent)return!1;var a=r.getBoundingClientRect(),f=t(n.yOffset||0,a.height),d=t(n.xOffset||0,a.width);return a.right-d>=0&&a.bottom-f>=0&&a.left+d<=window.innerWidth&&a.top+f<=window.innerHeight}function r(t){var n=e.Deferred.defaults,r=t.options.deferred,a=i.getValueOrDefault;return void 0===r?r={}:"boolean"==typeof r&&(r={enabled:r}),{enabled:a(r.enabled,n.enabled),xOffset:a(r.xOffset,n.xOffset),yOffset:a(r.yOffset,n.yOffset),delay:a(r.delay,n.delay),appeared:!1,delayed:!1,loaded:!1,elements:[]}}function a(t){var r=t.target,a=r[l];a.ticking||(a.ticking=!0,e.platform.defer(function(){var e,t,r=a.instances.slice(),f=r.length;for(t=0;t<f;++t)e=r[t],n(e)&&(o(e),e[s].appeared=!0,e.update());a.ticking=!1}))}function f(e){var t=e.nodeType;if(t===Node.ELEMENT_NODE){var n=i.getStyle(e,"overflow-x"),r=i.getStyle(e,"overflow-y");return"auto"===n||"scroll"===n||"auto"===r||"scroll"===r}return e.nodeType===Node.DOCUMENT_NODE}function d(e){for(var t,n,r=e.chart.canvas,d=r.parentElement;d;)f(d)&&(t=d[l]||(d[l]={}),n=t.instances||(t.instances=[]),0===n.length&&d.addEventListener("scroll",a,{passive:!0}),n.push(e),e[s].elements.push(d)),d=d.parentElement||d.ownerDocument}function o(e){e[s].elements.forEach(function(t){var n=t[l].instances;n.splice(n.indexOf(e),1),n.length||(i.removeEvent(t,"scroll",a),delete t[l])}),e[s].elements=[]}var i=e.helpers,l="_chartjs_deferred",s="_deferred_model";e.Deferred=e.Deferred||{},e.Deferred.defaults={enabled:!0,xOffset:0,yOffset:0,delay:0},e.platform=i.extend(e.platform||{},{defer:function(e,t,n){var r=function(){e.call(n)};t?window.setTimeout(r,t):i.requestAnimFrame.call(window,r)}}),e.plugins.register({beforeInit:function(e){var t=e[s]=r(e);t.enabled&&d(e)},beforeDatasetsUpdate:function(t){var r=t[s];if(!r.enabled)return!0;if(!r.loaded){if(!r.appeared&&!n(t))return!1;if(r.appeared=!0,r.loaded=!0,o(t),r.delay>0)return r.delayed=!0,e.platform.defer(function(){r.delayed=!1,t.update()},r.delay),!1}return!r.delayed&&void 0},destroy:function(e){o(e)}})}()});